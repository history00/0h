const quizDatabase = {
    paragraph_14: {
        title: "§ 14. Развитие культуры Беларуси в XIX — начале ХХ в.",
        coverImage: "images/quiz_covers/culture_cover.jpg",
        questions: [
            {
                question: "Что способствовало техническому прогрессу в промышленности?",
                answers: [
                    "Развитие литературы",
                    "Создание театральных трупп",
                    "Проведение школьной реформы",
                    "Изобретение парового двигателя"
                ],
                correct: 3,
                explanation: "Правильный ответ: Изобретение парового двигателя. Именно паровой двигатель стал ключевым фактором промышленной революции в XIX веке."
            },
            {
                question: "Что было отличительной чертой нового этапа в развитии техники?",
                answers: [
                    "Ручной труд",
                    "Использование электричества",
                    "Производство машин с помощью других машин",
                    "Развитие торговли"
                ],
                correct: 2,
                explanation: "Правильный ответ: Производство машин с помощью других машин. Это означало переход к машинному производству средств производства."
            },
            {
                question: "Что вызвало переворот в развитии транспорта и связи?",
                answers: [
                    "Потребности торговли и промышленности",
                    "Развитие науки",
                    "Деятельность кружков",
                    "Школьная реформа"
                ],
                correct: 0,
                explanation: "Правильный ответ: Потребности торговли и промышленности. Экономические потребности стали основным двигателем технического прогресса."
            },
            {
                question: "Какие проблемы вызвала индустриализация?",
                answers: [
                    "Упрощение жизни",
                    "Рост стабильности",
                    "Ощущение утраты прочности",
                    "Ускорение прогресса"
                ],
                correct: 2,
                explanation: "Правильный ответ: Ощущение утрата прочности. Индустриализация принесла не только прогресс, но и социальные проблемы, включая чувство неуверенности."
            },
            {
                question: "Какие влияния испытывала культура Беларуси?",
                answers: [
                    "Только польское",
                    "Польское и российское",
                    "Только российское",
                    "Европейское"
                ],
                correct: 1,
                explanation: "Правильный ответ: Польское и российское. Культура Беларуси развивалась под влиянием обеих культур."
            },
            {
                question: "Под чьим влиянием развивалась шляхетская культура до 1830-1831 гг.?",
                answers: [
                    "Российским",
                    "Польским",
                    "Белорусским",
                    "Украинским"
                ],
                correct: 1,
                explanation: "Правильный ответ: Польским. До восстания 1830-1831 годов шляхетская культура развивалась преимущественно под польским влиянием."
            },
            {
                image: "images/questions/culture_7_horizontal.jpg",
                question: "В каком году был закрыт Виленский университет?",
                answers: [
                    "1833",
                    "1831",
                    "1830",
                    "1832"
                ],
                correct: 3,
                explanation: "Правильный ответ: 1832. Виленский университет был закрыт в 1832 году после восстания 1830-1831 годов."
            },
            {
                question: "Кто был носителем белорусских традиций и языка?",
                answers: [
                    "Шляхта",
                    "Крестьянство",
                    "Горожане",
                    "Духовенство"
                ],
                correct: 1,
                explanation: "Правильный ответ: Крестьянство. Именно крестьянство сохранило белорусские традиции и язык в XIX веке."
            },
            {
                question: "Когда была издана «Идиллия» Дунина-Марцинкевича?",
                answers: [
                    "1820 г.",
                    "1863 г.",
                    "1889 г.",
                    "1846 г."
                ],
                correct: 3,
                explanation: "Правильный ответ: 1846 г. «Идиллия» была издана в 1846 году и стала важным произведением белорусской литературы."
            },
            {
                question: "Какие сборники издал Богушевич?",
                answers: [
                    "«флейта белорусская»",
                    "«Дудка белорусская»",
                    "«Смык белорусский»",
                    "«Первое чтение»"
                ],
                correct: [1, 2],
                multiple: true,
                explanation: "Правильные ответы: «Дудка белорусская» и «Смык белорусский». Франтишек Богушевич издал эти сборники в 1891 и 1894 годах соответственно."
            },
            {
                image: "images/questions/culture_11_vertical.jpg",
                question: "Кто дал название сборнику «Скрипка белорусская»?",
                answers: [
                    "Пашкевич",
                    "Богушевич",
                    "Купала",
                    "Колас"
                ],
                correct: 0,
                explanation: "Правильный ответ: Пашкевич. Алоиза Пашкевич (Тётка) издала сборник «Скрипка белорусская» в 1906 году."
            },
            {
                image: "images/questions/culture_12_vertical.jpg",
                question: "Какие вузы действовали в начале XIX века?",
                answers: [
                    "Только Виленский университет",
                    "Виленский университет и Полоцкая академия",
                    "Университеты Петербурга",
                    "Горы-Горецкий институт"
                ],
                correct: 1,
                explanation: "Правильный ответ: Виленский университет и Полоцкая академия. В начале XIX века на белорусских землях действовали эти два высших учебных заведения."
            },
            {
                question: "Что свидетельствует о сословном характере образования?",
                answers: [
                    "Всесословность",
                    "Наличие профессиональных училищ",
                    "Преемственность образования",
                    "Доступ низших сословий только к начальному образованию"
                ],
                correct: 3,
                explanation: "Правильный ответ: Доступ низших сословий только к начальному образованию. Сословный характер образования проявлялся в ограничении доступа к образованию для низших сословий."
            },
            {
                image: "images/questions/culture_14_horizontal.jpg",
                question: "Какое учебное заведение было первым сельскохозяйственным вузом?",
                answers: [
                    "Виленский университет",
                    "Горы-Горецкий институт",
                    "Полоцкая академия",
                    "Молодечненская семинария"
                ],
                correct: 1,
                explanation: "Правильный ответ: Горы-Горецкий институт. Горы-Горецкий земледельческий институт, открытый в 1840 году, был первым сельскохозяйственным вузом на территории Беларуси."
            },
            {
                question: "Какие учреждения давали среднее образование?",
                answers: [
                    "Гимназии",
                    "Реальные училища",
                    "Училища",
                    "Церковно-приходские школы"
                ],
                correct: [0, 1],
                multiple: true,
                explanation: "Правильные ответы: Гимназии и Реальные училища. Эти учреждения давали среднее образование в XIX веке."
            },
            {
                question: "Когда в Молодечно действовала первая в Российской империи учительская семинария по подготовке учителей начальных классов?",
                answers: [
                    "1848",
                    "1864",
                    "1860",
                    "1820"
                ],
                correct: 1,
                explanation: "Правильный ответ: 1864. Первая в Российской империи учительская семинария была открыта в Молодечно в 1864 году."
            },
            {
                question: "Какой словарь создал Иван Носович?",
                answers: [
                    "«Белорусы»",
                    "«Путешествие по Полесью»",
                    "«Краткая история Беларуси»",
                    "«Словарь белорусского наречия»"
                ],
                correct: 3,
                explanation: "Правильный ответ: «Словарь белорусского наречия». Иван Носович создал «Словарь белорусского наречия», изданный в 1870 году."
            },
            {
                question: "Кем был Игнат Домейко?",
                answers: [
                    "Физиком",
                    "Химиком",
                    "Геологом",
                    "Биологом"
                ],
                correct: 2,
                explanation: "Правильный ответ: Геологом. Игнат Домейко был известным геологом и минералогом."
            },
            {
                image: "images/questions/culture_19_horizontal.jpg",
                question: "Кто был представителем романтизма в портретной живописи?",
                answers: [
                    "Хруцкий",
                    "Ванькович",
                    "Силиванович",
                    "Пэн"
                ],
                correct: 1,
                explanation: "Правильный ответ: Ванькович. Валентий Ванькович был ярким представителем романтизма в белорусской живописи."
            },
            {
                image: "images/questions/culture_20_vertical.jpg",
                question: "Кто был мастером натюрморта?",
                answers: [
                    "Хруцкий",
                    "Ванькович",
                    "Шагал",
                    "Бялыницкий-Бируля"
                ],
                correct: 0,
                explanation: "Правильный ответ: Хруцкий. Иван Хруцкий был выдающимся мастером натюрморта в белорусской живописи XIX века."
            },
            {
                image: "images/questions/culture_21_vertical.jpg",
                question: "Кто основал школу в Витебске?",
                answers: [
                    "Шагал",
                    "Орда",
                    "Пэн",
                    "Горавский"
                ],
                correct: 2,
                explanation: "Правильный ответ: Пэн. Юдель Пэн основал художественную школу в Витебске, где учились многие известные художники."
            },
            {
                question: "Какой стиль был ведущим в первой половине XIX века?",
                answers: [
                    "Эклектика",
                    "Классицизм",
                    "Модерн",
                    "Барокко"
                ],
                correct: 1,
                explanation: "Правильный ответ: Классицизм. В первой половине XIX века в архитектуре преобладал классицизм."
            },
            {
                question: "Что характерно для архитектуры второй половины XIX века?",
                answers: [
                    "Эклектика",
                    "Классицизм",
                    "Модерн",
                    "Готика"
                ],
                correct: 0,
                explanation: "Правильный ответ: Эклектика. Для архитектуры второй половины XIX века была характерна эклектика - смешение различных стилей."
            },
            {
                question: "Какая опера считается первой белорусской?",
                answers: [
                    "«Павлинка»",
                    "«Идиллия»",
                    "«Разоренное гнездо»",
                    "«Селянка»"
                ],
                correct: 3,
                explanation: "Правильный ответ: «Селянка». Опера «Селянка» считается первой белорусской национальной оперой."
            },
            {
                image: "images/questions/culture_25_vertical.jpg",
                question: "Кто создал первую театральную труппу?",
                answers: [
                    "Буйницкий",
                    "Дунин-Марцинкевич",
                    "Жданович",
                    "Бурбис"
                ],
                correct: 1,
                explanation: "Правильный ответ: Дунин-Марцинкевич. Винцент Дунин-Марцинкевич создал первую белорусскую театральную труппу в середине XIX века."
            },
            {
                question: "Чья труппа гастролировала по империи в 1907 году?",
                answers: [
                    "Буйницкого",
                    "Дунина-Марцинкевича",
                    "Бурбиса",
                    "Ждановича"
                ],
                correct: 0,
                explanation: "Правильный ответ: Буйницкого. Труппа Игната Буйницкого гастролировала по Российской империи в 1907-1913 годах."
            }
        ]
    },

    paragraph_15: {
        title: "§ 15. Первая мировая война как рубежный период мировой истории",
        coverImage: "images/quiz_covers/medieval_cover.jpg",
        questions: [
            {
                question: "Что было результатом противоречий между основными европейскими державами?",
                answers: [
                    "Первая мировая война",
                    "Вторая мировая война",
                    "Холодная война",
                    "Наполеоновские войны"
                ],
                correct: 0,
                explanation: "Правильный ответ: Первая мировая война. Противоречия между европейскими державами привели к началу Первой мировой войны."
            },
            {
                question: "Какие факторы привели к началу Первой мировой войны?",
                answers: [
                    "Распространение социалистических идей",
                    "Рост националистических настроений",
                    "Гонка вооружений и создание военных блоков",
                    "Соперничество за колонии и рынки сбыта"
                ],
                correct: [1, 2, 3],
                multiple: true,
                explanation: "Правильные ответы: Рост националистических настроений, Гонка вооружений и создание военных блоков, Соперничество за колонии и рынки сбыта. Эти факторы стали основными причинами начала войны."
            },
            {
                question: "Какой характер носила Первая мировая война?",
                answers: [
                    "Национально-освободительный",
                    "Империалистический",
                    "Гражданский",
                    "Религиозный"
                ],
                correct: 1,
                explanation: "Правильный ответ: Империалистический. Первая мировая война носила империалистический характер."
            },
            {
                question: "Какие империи развязали Первую мировую войну, стремясь расширить свое влияние?",
                answers: [
                    "Все перечисленные империи Азии",
                    "Австро-Венгерская, Османская, Российская",
                    "Британская, Германская, Японская",
                    "Британская, Французская, Германская"
                ],
                correct: [1, 3],
                multiple: true,
                explanation: "Правильные ответы: Австро-Венгерская, Османская, Российская и Британская, Французская, Германская. Эти империи стремились расширить свое влияние."
            },
            {
                question: "Между какими центрами концентрации капитала шла война?",
                answers: [
                    "Американским и британским",
                    "Англо-французским и германским",
                    "Российским и германским",
                    "Японским и американским"
                ],
                correct: 1,
                explanation: "Правильный ответ: Англо-французским и германским. Война шла между этими центрами концентрации капитала."
            },
            {
                question: "Какие военно-политические блоки противостояли друг другу в Первой мировой войне?",
                answers: [
                    "Антанта и Тройственный союз",
                    "НАТО и ОВД",
                    "Союз Центральных держав и Антигитлеровская коалиция",
                    "Священный союз и Тройственная лига"
                ],
                correct: 0,
                explanation: "Правильный ответ: Антанта и Тройственный союз. Эти блоки противостояли друг другу в Первой мировой войне."
            },
            {
                question: "Какая страна, изначально входившая в Тройственный союз, позже выступила на стороне Антанта?",
                answers: [
                    "Болгария",
                    "Османская империя",
                    "Италия",
                    "Австро-Венгрия"
                ],
                correct: 2,
                explanation: "Правильный ответ: Италия. Италия изначально входила в Тройственный союз, но позже выступила на стороне Антанта."
            },
            {
                question: "Какую цель в войне преследовала Великобритания?",
                answers: [
                    "Захватить черноморские проливы",
                    "Подорвать растущее могущество Германии",
                    "Вернуть Эльзас и Лотарингию",
                    "Подчинить славянские государства на Балканах"
                ],
                correct: 1,
                explanation: "Правильный ответ: Подорвать растущее могущество Германии. Великобритания стремилась подорвать растущее могущество Германии."
            },
            {
                question: "Что стремилась вернуть Франция?",
                answers: [
                    "Саарскую область",
                    "Эльзас и Лотарингию",
                    "Месопотамию",
                    "Восточную Пруссию"
                ],
                correct: 1,
                explanation: "Правильный ответ: Эльзас и Лотарингию. Франция стремилась вернуть эти территории."
            },
            {
                question: "Какую цель преследовала Российская империя на Балканах?",
                answers: [
                    "Захватить Босфор и Дарданеллы",
                    "Подчинить Сербию",
                    "Оказать поддержку Сербскому королевству",
                    "Расчленить Австро-Венгрию"
                ],
                correct: 2,
                explanation: "Правильный ответ: Оказать поддержку Сербскому королевству. Российская империя стремилась оказать поддержку Сербскому королевству."
            },
            {
                question: "Что хотели получить Великобритания и Франция при расчленении Османской империи?",
                answers: [
                    "Сирию и Месопотамию",
                    "Босфор и Дарданеллы",
                    "Ливан и Сирию",
                    "Территории в Восточной Европе"
                ],
                correct: [0, 2],
                multiple: true,
                explanation: "Правильные ответы: Сирию и Месопотамию, Ливан и Сирию. Великобритания и Франция хотели получить эти территории."
            },
            {
                question: "Какую цель ставила перед собой Германия в войне?",
                answers: [
                    "Ослабить Великобританию, Францию и Россию",
                    "Помочь Сербии в объединении славян",
                    "Сохранить нейтралитет Бельгии",
                    "Расширить свои колониальные владения"
                ],
                correct: [0, 3],
                multiple: true,
                explanation: "Правильные ответы: Ослабить Великобританию, Францию и Россию и Расширить свои колониальные владения. Германия ставила перед собой эти цели."
            },
            {
                question: "Что стало непосредственным поводом к началу войны?",
                answers: [
                    "Объявление Германией войны России",
                    "Убийство наследника австро-венгерского престола",
                    "Начало мобилизации в России",
                    "Объявление войны Сербии Австро-Венгрией"
                ],
                correct: 1,
                explanation: "Правильный ответ: Убийство наследника австро-венгерского престола. Это событие стало непосредственным поводом к началу войны."
            },
            {
                question: "Кто совершил убийство в Сараево?",
                answers: [
                    "Австрийские националисты",
                    "Члены сербской подпольной организации",
                    "Российские агенты",
                    "Боснийские сепаратисты"
                ],
                correct: 1,
                explanation: "Правильный ответ: Члены сербской подпольной организации. Убийство в Сараево совершили члены сербской подпольной организации."
            },
            {
                question: "Какая страна первой объявила войну в 1914 году?",
                answers: [
                    "Германия",
                    "Россия",
                    "Австро-Венгрия",
                    "Великобритания"
                ],
                correct: 2,
                explanation: "Правильный ответ: Австро-Венгрия. Эта страна первой объявила войну в 1914 году."
            },
            {
                question: "Какой стране Германия объявила войну 1 августа 1914 года?",
                answers: [
                    "Франция",
                    "Сербия",
                    "Бельгия",
                    "Россия"
                ],
                correct: 3,
                explanation: "Правильный ответ: Россия. Германия объявила войну России 1 августа 1914 года."
            },
            {
                question: "Почему Великобритания объявила войну Германии?",
                answers: [
                    "Германия объявила войну Франции",
                    "Германия потребовала от России прекратить мобилизацию",
                    "Германские войска перешли бельгийскую границу",
                    "Германия напала на британские колонии"
                ],
                correct: 2,
                explanation: "Правильный ответ: Германские войска перешли бельгийскую границу. Великобритания объявила войну Германии из-за нарушения нейтралитета Бельгии."
            },
            {
                question: "Кого изначально считали виновной в развязывании войны?",
                answers: [
                    "Россию",
                    "Германию",
                    "Австро-Венгрию",
                    "Сербию"
                ],
                correct: 1,
                explanation: "Правильный ответ: Германию. Изначально виновной в развязывании войны считали Германию."
            },
            {
                question: "Какой военный план был разработан в Германии?",
                answers: [
                    "План тотальной обороны",
                    "План войны на два фронта",
                    "План «молниеносной войны»",
                    "План длительной позиционной войны"
                ],
                correct: 2,
                explanation: "Правильный ответ: План «молниеносной войны». В Германии был разработан план «молниеносной войны» (план Шлиффена)."
            },
            {
                question: "Что было главной целью немецкого плана войны?",
                answers: [
                    "Быстро разгромить Францию, затем Россию",
                    "Быстро разгромить Россию, затем Францию",
                    "Обороняться на обоих фронтах одновременно",
                    "Вывести из войны Великобританию блокадой"
                ],
                correct: 0,
                explanation: "Правильный ответ: Быстро разгромить Францию, затем Россию. Это была главная цель немецкого плана войны."
            },
            {
                question: "Почему германский план «молниеносной войны» провалился?",
                answers: [
                    "Российские войска отвлекли внимание Германии от Западного фронта",
                    "Франция оказала слишком сильное сопротивление",
                    "Великобритания сразу ввела крупные силы",
                    "Германии пришлось воевать на два фронта"
                ],
                correct: 3,
                explanation: "Правильный ответ: Германии пришлось воевать на два фронта. Это стало основной причиной провала плана «молниеносной войны»."
            },
            {
                image: "images/questions/ww1_22_battle_of_marne.jpg",
                question: "Какое сражение на Западном фронте произошло в сентябре 1914 года?",
                answers: [
                    "Верденская мясорубка",
                    "Битва на Сомме",
                    "Битва на Марне",
                    "Брусиловский прорыв"
                ],
                correct: 2,
                explanation: "Правильный ответ: Битва на Марне. Это сражение произошло в сентябре 1914 года."
            },
            {
                image: "images/questions/ww1_23_brusilov_offensive.jpg",
                question: "Какая операция российских войск в 1916 году имела большое значение для облегчения положения союзников?",
                answers: [
                    "Взятие Львова",
                    "Наступление под командованием А.А. Брусилова",
                    "Оборона Порт-Артура",
                    "Восточно-Прусская операция"
                ],
                correct: 1,
                explanation: "Правильный ответ: Наступление под командованием А.А. Брусилова. Брусиловский прорыв имел большое значение для облегчения положения союзников."
            },
            {
                question: "Какое новое оружие массового поражения применялось в Первую мировую войну?",
                answers: [
                    "Танки и самолеты",
                    "Атомная бомба",
                    "Тяжелые орудия и подводные лодки",
                    "Отравляющие газы и пулеметы"
                ],
                correct: [0, 2, 3],
                multiple: true,
                explanation: "Правильные ответы: Танки и самолеты, Тяжелые орудия и подводные лодки, Отравляющие газы и пулеметы. Это новое оружие применялось в Первую мировую войну."
            },
            {
                question: "Сколько процентов составили военные расходы в Великобритании в 1918 году?",
                answers: [
                    "65",
                    "49",
                    "80",
                    "92"
                ],
                correct: 2,
                explanation: "Правильный ответ: 80. Военные расходы в Великобритании в 1918 году составили 80%."
            },
            {
                question: "Какие государства появились на карте Европы после войны?",
                answers: [
                    "Польша, Чехословакия, Югославия",
                    "Объединенная Германия и Австро-Венгрия",
                    "Турецкая республика и арабские государства",
                    "Латвия, Литва, Эстония, Финляндия"
                ],
                correct: [0, 3],
                multiple: true,
                explanation: "Правильные ответы: Польша, Чехословакия, Югославия и Латвия, Литва, Эстония, Финляндия. Эти государства появились на карте Европы после войны."
            }
        ]
    },

    paragraph_16: {
        title: "§ 16. Беларусь в годы Первой мировой войны",
        coverImage: "images/quiz_covers/empire_cover.jpg",
        questions: [
            {
                question: "Когда непосредственно на территории Беларуси начались военные действия?",
                answers: [
                    "Летом 1914 г.",
                    "Летом 1915 г.",
                    "Осенью 1914 г.",
                    "В августе 1915 г."
                ],
                correct: 1,
                explanation: "Правильный ответ: Летом 1915 г. Именно в это время военные действия переместились на территорию Беларуси."
            },
            {
                question: "Где размещалась Ставка Верховного главнокомандующего российских войск в начальный период войны?",
                answers: [
                    "В Минске",
                    "В Могилеве",
                    "В Барановичах",
                    "В Сморгони"
                ],
                correct: 2,
                explanation: "Правильный ответ: В Барановичах. Ставка Верховного главнокомандующего размещалась в Барановичах в начальный период войны."
            },
            {
                question: "Какие причины сдерживали наступление российских войск в 1914 году?",
                answers: [
                    "Медленная мобилизация и отсутствие удобных дорог",
                    "Недовольство местного населения",
                    "Недостаток вооружений и ненадежная связь",
                    "Предательство союзников"
                ],
                correct: [0, 2],
                multiple: true,
                explanation: "Правильные ответы: Медленная мобилизация и отсутствие удобных дорог, Недостаток вооружений и ненадежная связь. Эти факторы сдерживали наступление российских войск."
            },
            {
                question: "В каком сражении на территории Восточной Пруссии приняли участие мобилизованные из белорусских губерний?",
                answers: [
                    "Под Верденом",
                    "Под Гумбиненом",
                    "Под Варшавой",
                    "На Мазурских озерах"
                ],
                correct: 1,
                explanation: "Правильный ответ: Под Гумбиненом. В этом сражении приняли участие мобилизованные из белорусских губерний."
            },
            {
                question: "Какая операция осенью 1914 года позволила остановить и отбросить германские войска?",
                answers: [
                    "Виленская операция",
                    "Варшавско-Ивангородская операция",
                    "Нарочская операция",
                    "Барановичская операция"
                ],
                correct: 1,
                explanation: "Правильный ответ: Варшавско-Ивангородская операция. Эта операция позволила остановить и отбросить германские войска."
            },
            {
                question: "Куда была перенесена Ставка Верховного Главнокомандующего в августе 1915 года?",
                answers: [
                    "В Минск",
                    "В Смоленск",
                    "В Могилев",
                    "В Вилейку"
                ],
                correct: 2,
                explanation: "Правильный ответ: В Могилев. Ставка была перенесена в Могилев в августе 1915 года."
            },
            {
                question: "Как назывался прорыв германских войск, который удалось ликвидировать российской армии в августе 1915 года?",
                answers: [
                    "Свенцянский",
                    "Барановичский",
                    "Виленский",
                    "Смолевичский"
                ],
                correct: 0,
                explanation: "Правильный ответ: Свенцянский. Российская армия ликвидировала Свенцянский прорыв."
            },
            {
                question: "По какой линии стабилизировался фронт в сентябре 1915 года?",
                answers: [
                    "Минск–Смоленск",
                    "Двинск–Поставы–Сморгонь–Барановичи–Пинск",
                    "Вилейка–Сморгонь–Смолевичи",
                    "Лида–Пружаны–Брест-Литовск"
                ],
                correct: 1,
                explanation: "Правильный ответ: Двинск–Поставы–Сморгонь–Барановичи–Пинск. По этой линии стабилизировался фронт."
            },
            {
                image: "images/questions/paragraph16_9.jpg",
                question: "Какая операция 1916 года была предпринята Россией для помощи союзникам под Верденом?",
                answers: [
                    "Виленская операция",
                    "Барановичская операция",
                    "Нарочская операция",
                    "Варшавско-Ивангородская операция"
                ],
                correct: 2,
                explanation: "Правильный ответ: Нарочская операция. Эта операция была предпринята для помощи союзникам под Верденом."
            },
            {
                question: "Какие причины привели к провалу Нарочской операции?",
                answers: [
                    "Предательство солдат",
                    "Неблагоприятные погодные условия и плохое управление",
                    "Вмешательство германской авиации",
                    "Отсутствие поддержки со стороны местного населения"
                ],
                correct: 1,
                explanation: "Правильный ответ: Неблагоприятные погодные условия и плохое управление. Эти причины привели к провалу операции."
            },
            {
                question: "Когда состоялось последнее наступление российских войск на территории Беларуси?",
                answers: [
                    "В феврале 1917 г.",
                    "Летом 1916 г.",
                    "В июле 1917 г.",
                    "В августе 1915 г."
                ],
                correct: 2,
                explanation: "Правильный ответ: В июле 1917 г. Это было последнее наступление российских войск."
            },
            {
                question: "Какое событие в России кардинально изменило ситуацию к июлю 1917 года?",
                answers: [
                    "Подписание Брестского мира",
                    "Свержение самодержавия в ходе Февральской революции",
                    "Окончание Первой мировой войны",
                    "Начало Гражданской войны"
                ],
                correct: 1,
                explanation: "Правильный ответ: Свержение самодержавия в ходе Февральской революции. Это событие кардинально изменило ситуацию."
            },
            {
                image: "images/questions/paragraph16_13.jpg",
                question: "Когда был подписан Брестский мирный договор?",
                answers: [
                    "3 марта 1917 г.",
                    "Февраль 1918 г.",
                    "13 ноября 1918 г.",
                    "3 марта 1918 г."
                ],
                correct: 3,
                explanation: "Правильный ответ: 3 марта 1918 г. Брестский мирный договор был подписан 3 марта 1918 года."
            },
            {
                question: "Как большевики рассматривали Брестский мир?",
                answers: [
                    "Как временную, тактическую меру",
                    "Как дипломатическую победу",
                    "Как окончательное решение",
                    "Как акт национального предательства"
                ],
                correct: 0,
                explanation: "Правильный ответ: Как временную, тактическую меру. Большевики рассматривали его как временную меру."
            },
            {
                question: "Какая часть территории Беларуси по Брестскому договору отходила Германии?",
                answers: [
                    "Земли южнее Полесской железной дороги",
                    "Земли восточнее линии Двинск–Брест-Литовск",
                    "Земли западнее линии Двинск–Лида–Пружаны–Брест-Литовск",
                    "Вся территория Беларуси"
                ],
                correct: 2,
                explanation: "Правильный ответ: Земли западнее линии Двинск–Лида–Пружаны–Брест-Литовск. Эта часть отходила Германии."
            },
            {
                question: "Когда советское правительство аннулировало условия Брестского мира?",
                answers: [
                    "3 марта 1918 г.",
                    "Февраль 1918 г.",
                    "Февраль 1919 г.",
                    "13 ноября 1918 г."
                ],
                correct: 3,
                explanation: "Правильный ответ: 13 ноября 1918 г. Советское правительство аннулировало условия Брестского мира."
            },
            {
                question: "Сколько жителей Беларуси было мобилизовано в российскую армию?",
                answers: [
                    "Около 400 тыс.",
                    "Около 1,2 млн",
                    "Около 900 тыс.",
                    "62 тыс."
                ],
                correct: 2,
                explanation: "Правильный ответ: Около 900 тыс. Столько жителей Беларуси было мобилизовано."
            },
            {
                image: "images/questions/paragraph16_18.jpg",
                question: "Во сколько раз выросли цены на продукты и одежду в 1917 году по сравнению с 1913 годом?",
                answers: [
                    "В 2–3 раза",
                    "В 5–8 раз",
                    "В 10–12 раз",
                    "Не изменились"
                ],
                correct: 1,
                explanation: "Правильный ответ: В 5–8 раз. Инфляция в годы войны привела к значительному росту цен."
            },
            {
                question: "Какие организации помогали беженцам на начальном этапе?",
                answers: [
                    "Только государственные комитеты",
                    "«Всероссийский земский союз» и «Всероссийский союз городов»",
                    "Международный Красный Крест",
                    "Германские оккупационные власти"
                ],
                correct: 1,
                explanation: "Правильный ответ: «Всероссийский земский союз» и «Всероссийский союз городов». Эти организации помогали беженцам."
            },
            {
                image: "images/questions/paragraph16_20.jpg",
                question: "Какая форма протестов была наиболее характерна для крестьян в годы войны?",
                answers: [
                    "Организованные забастовки",
                    "Манифестации и шествия",
                    "Стихийный разгром помещичьих усадеб",
                    "Политические стачки"
                ],
                correct: 2,
                explanation: "Правильный ответ: Стихийный разгром помещичьих усадеб. Это была наиболее характерная форма протеста для крестьян."
            },
            {
                question: "Сколько выступлений солдат произошло в Беларуси за годы войны?",
                answers: [
                    "99",
                    "60",
                    "7",
                    "62"
                ],
                correct: 3,
                explanation: "Правильный ответ: 62. Столько выступлений солдат произошло в Беларуси."
            },
            {
                question: "Какая белорусская газета прекратила выход в 1915 году?",
                answers: [
                    "«Дзянніца»",
                    "«Наша ніва»",
                    "«Звязда»",
                    "«Мінская праўда»"
                ],
                correct: 1,
                explanation: "Правильный ответ: «Наша ніва». Эта газета прекратила выход в 1915 году."
            },
            {
                question: "Какая организация стала центром белорусского национального движения в Минске?",
                answers: [
                    "Белорусское общество пострадавших от войны в Петрограде",
                    "«Татьянинский комитет»",
                    "Белорусское общество помощи пострадавшим от войны",
                    "«Всероссийский союз городов»"
                ],
                correct: 2,
                explanation: "Правильный ответ: Белорусское общество помощи пострадавшим от войны. Эта организация стала центром национального движения."
            },
            {
                question: "В каком городе, кроме Минска, действовал важный центр белорусского национального движения?",
                answers: [
                    "Брест-Литовск",
                    "Петроград",
                    "Москва",
                    "Вилейка"
                ],
                correct: 1,
                explanation: "Правильный ответ: Петроград. В этом городе также действовал важный центр национального движения."
            },
            {
                question: "Каковы были общие людские потери Беларуси в Первой мировой войне?",
                answers: [
                    "1,2 млн человек",
                    "Около 900 тыс. человек",
                    "Более 400 тыс. человек",
                    "62 тыс. человек"
                ],
                correct: 0,
                explanation: "Правильный ответ: 1,2 млн человек. Столько составили общие людские потери Беларуси."
            },
            {
                question: "Какое последствие войны для сельского хозяйства указано в тексте?",
                answers: [
                    "Увеличение посевных площадей",
                    "Реквизиция лошадей для армии",
                    "Отмена налогов",
                    "Механизация труда"
                ],
                correct: 1,
                explanation: "Правильный ответ: Реквизиция лошадей для армии. Это было одним из серьезных последствий войны для сельского хозяйства."
            }
        ]
    }
};

const firebaseConfig = {
    apiKey: "AIzaSyDk1oxsi6xZVv1yf_-8SpOk4b1lapgr6bI",
    authDomain: "quiz-834d2.firebaseapp.com",
    projectId: "quiz-834d2",
    storageBucket: "quiz-834d2.firebasestorage.app",
    messagingSenderId: "287075846771",
    appId: "1:287075846771:web:e94f93858c2a18a47cb806",
    measurementId: "G-TSEBHY1WNX"
};

try {
    firebase.initializeApp(firebaseConfig);
} catch (error) {
    console.log('Firebase уже инициализирован');
}

const db = firebase.firestore();

let currentQuiz = null;
let currentQuizId = null;
let currentQuestion = 0;
let score = 0;
let timer = null;
let startTime = null;
let totalTimeSpent = 0;
let userAnswers = [];
let soundEnabled = true;
let selectedNickname = null;
let isFullscreen = false;
let selectedAnswers = [];
let isMultipleSelection = false;
let maxSelections = 0;

function formatTime(seconds) {
    if (seconds < 60) {
        return `${seconds} сек`;
    } else {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = seconds % 60;
        return `${minutes} мин. ${remainingSeconds} сек`;
    }
}

function toggleSound() {
    soundEnabled = !soundEnabled;
    updateSoundButton();
    localStorage.setItem('quizSoundEnabled', soundEnabled);
}

function updateSoundButton() {
    const soundToggle = document.getElementById('sound-toggle');
    const soundIcon = document.getElementById('sound-icon');
    
    if (soundToggle && soundIcon) {
        if (soundEnabled) {
            soundIcon.textContent = '🔊';
            soundToggle.title = 'Выключить звук';
        } else {
            soundIcon.textContent = '🔇';
            soundToggle.title = 'Включить звук';
        }
    }
}

function playCorrectSound() {
    if (!soundEnabled) return;
    
    try {
        const sound = document.getElementById('correct-sound');
        if (sound) {
            sound.currentTime = 0;
            sound.play().catch(e => console.log('Не удалось воспроизвести звук'));
        }
    } catch (error) {
        console.log('Ошибка воспроизведения звука');
    }
}

function playWrongSound() {
    if (!soundEnabled) return;
    
    try {
        const sound = document.getElementById('wrong-sound');
        if (sound) {
            sound.currentTime = 0;
            sound.play().catch(e => console.log('Не удалось воспроизвести звук'));
        }
    } catch (error) {
        console.log('Ошибка воспроизведения звука');
    }
}

async function saveResultToFirebase(resultData) {
    try {
        console.log('Попытка сохранения в Firebase:', resultData);
        
        const docRef = await db.collection('quizResults').add({
            ...resultData,
            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
            id: Date.now().toString()
        });
        
        console.log('✅ Результат успешно сохранен в Firebase с ID:', docRef.id);
        return true;
    } catch (error) {
        console.error('❌ Ошибка сохранения в Firebase:', error);
        saveResultToLocalStorage(resultData);
        return false;
    }
}

async function getResultsFromFirebase(quizId = null) {
    try {
        let query = db.collection('quizResults');
        
        if (quizId) {
            query = query.where('quizId', '==', quizId);
        }
        
        const snapshot = await query.orderBy('timestamp', 'desc').get();
        const results = [];
        
        snapshot.forEach(doc => {
            results.push({
                id: doc.id,
                ...doc.data()
            });
        });
        
        console.log('Загружено результатов из Firebase:', results.length);
        return results;
    } catch (error) {
        console.error('Ошибка загрузки из Firebase:', error);
        return getResultsFromLocalStorage(quizId);
    }
}

function saveResultToLocalStorage(resultData) {
    try {
        let leaders = JSON.parse(localStorage.getItem('quizLeaders') || '[]');
        leaders.push({
            name: resultData.playerName,
            score: resultData.score,
            quiz: resultData.quizTitle,
            quizId: resultData.quizId,
            time: resultData.time,
            date: new Date().toLocaleDateString('ru-RU'),
            timestamp: new Date().getTime()
        });
        localStorage.setItem('quizLeaders', JSON.stringify(leaders));
        console.log('Результат сохранен локально');
    } catch (e) {
        console.error('Ошибка локального сохранения:', e);
    }
}

function getResultsFromLocalStorage(quizId = null) {
    try {
        const leaders = JSON.parse(localStorage.getItem('quizLeaders') || '[]');
        const formattedLeaders = leaders.map(item => ({
            playerName: item.name,
            score: item.score,
            time: item.time,
            quizId: item.quizId,
            quizTitle: item.quiz,
            timestamp: item.timestamp
        }));
        
        if (quizId) {
            return formattedLeaders.filter(leader => leader.quizId === quizId);
        }
        return formattedLeaders;
    } catch (e) {
        console.error('Ошибка загрузки локальных данных:', e);
        return [];
    }
}

function startQuiz(quizId) {
    currentQuiz = quizDatabase[quizId];
    currentQuizId = quizId;
    
    if (!currentQuiz.questions || currentQuiz.questions.length === 0) {
        showNotification('Эта викторина скоро будет доступна!', 'info');
        return;
    }
    
    currentQuestion = 0;
    score = 0;
    userAnswers = [];
    selectedNickname = null;
    selectedAnswers = [];
    isMultipleSelection = false;
    maxSelections = 0;
    startTime = new Date();
    
    const savedSound = localStorage.getItem('quizSoundEnabled');
    soundEnabled = savedSound !== null ? JSON.parse(savedSound) : true;
    updateSoundButton();
    
    document.getElementById('quiz-selection').classList.remove('active');
    document.getElementById('quiz-screen').classList.add('active');
    
    startTimer();
    showQuestion();
}

function showQuestion() {
    if (!currentQuiz) return;
    
    const question = currentQuiz.questions[currentQuestion];
    const questionImage = document.getElementById('question-image');
    
    const oldCounter = document.getElementById('selection-counter');
    if (oldCounter) {
        oldCounter.remove();
    }
    
    questionImage.innerHTML = '';
    
    if (question.image && question.image.includes('.')) {
        questionImage.style.display = 'flex';
        
        const img = document.createElement('img');
        img.src = question.image;
        img.alt = 'Изображение вопроса';
        img.className = 'question-image-content';
        questionImage.appendChild(img);
        
        img.onerror = function() {
            questionImage.innerHTML = '';
            questionImage.style.display = 'none';
        };
    } else {
        questionImage.style.display = 'none';
    }
    
    const progress = ((currentQuestion) / currentQuiz.questions.length) * 100;
    document.getElementById('progress-fill').style.width = progress + '%';
    document.getElementById('progress-text').textContent = `Вопрос ${currentQuestion + 1}/${currentQuiz.questions.length}`;
    
    document.getElementById('question-text').textContent = question.question;
    
    const answersContainer = document.getElementById('answers-container');
    answersContainer.innerHTML = '';
    
    selectedAnswers = [];
    isMultipleSelection = question.multiple || false;
    maxSelections = isMultipleSelection ? question.correct.length : 1;
    
    if (isMultipleSelection) {
        const selectionCounter = document.createElement('div');
        selectionCounter.id = 'selection-counter';
        selectionCounter.style.cssText = `
            text-align: center;
            margin-bottom: 1rem;
            font-size: 1.1rem;
            color: var(--gold-accent);
            font-weight: 600;
        `;
        selectionCounter.textContent = `Выберите ${maxSelections} ответ${maxSelections > 1 ? 'а' : ''}`;
        
        answersContainer.parentNode.insertBefore(selectionCounter, answersContainer);
    }
    
    question.answers.forEach((answer, index) => {
        const button = document.createElement('button');
        button.className = 'answer-btn';
        button.innerHTML = `
            <span class="answer-text">${answer}</span>
            <span class="answer-hover-effect"></span>
            ${isMultipleSelection ? '<span class="answer-checkmark"></span>' : ''}
        `;
        button.onclick = () => selectAnswer(index);
        answersContainer.appendChild(button);
    });
    
    const nextBtn = document.getElementById('next-btn');
    const nextBtnText = document.getElementById('next-btn-text');
    
    if (currentQuestion === currentQuiz.questions.length - 1) {
        nextBtnText.textContent = 'Завершить викторину';
    } else {
        nextBtnText.textContent = 'Следующий вопрос';
    }
    
    nextBtn.style.display = 'none';
    document.getElementById('quiz-feedback').style.display = 'none';
    document.getElementById('answer-explanation').style.display = 'none';
}

function selectAnswer(selectedIndex) {
    const question = currentQuiz.questions[currentQuestion];
    const answerButtons = document.querySelectorAll('.answer-btn');
    
    if (isMultipleSelection) {
        const index = selectedAnswers.indexOf(selectedIndex);
        
        if (index > -1) {
            selectedAnswers.splice(index, 1);
            answerButtons[selectedIndex].classList.remove('selected', 'shake');
        } else {
            if (selectedAnswers.length < maxSelections) {
                selectedAnswers.push(selectedIndex);
                answerButtons[selectedIndex].classList.add('selected', 'shake');
            } else {
                showNotification(`Можно выбрать только ${maxSelections} ответ${maxSelections > 1 ? 'а' : ''}`, 'warning');
                return;
            }
        }
        
        updateSelectionCounter();
        
        if (selectedAnswers.length === maxSelections) {
            checkMultipleAnswer();
        }
    } else {
        checkSingleAnswer(selectedIndex);
    }
}

function updateSelectionCounter() {
    const counter = document.getElementById('selection-counter');
    if (counter) {
        counter.textContent = `Выбрано: ${selectedAnswers.length}/${maxSelections}`;
    }
}

function checkMultipleAnswer() {
    const question = currentQuiz.questions[currentQuestion];
    const answerButtons = document.querySelectorAll('.answer-btn');
    const feedback = document.getElementById('quiz-feedback');
    const explanation = document.getElementById('answer-explanation');
    
    const selectionCounter = document.getElementById('selection-counter');
    if (selectionCounter) {
        selectionCounter.remove();
    }
    
    const sortedSelected = [...selectedAnswers].sort();
    const sortedCorrect = [...question.correct].sort();
    
    const isCorrect = JSON.stringify(sortedSelected) === JSON.stringify(sortedCorrect);
    
    userAnswers.push({
        question: question.question,
        userAnswer: selectedAnswers.map(idx => question.answers[idx]).join(', '),
        correctAnswer: question.correct.map(idx => question.answers[idx]).join(', '),
        isCorrect: isCorrect
    });
    
    answerButtons.forEach(btn => {
        btn.classList.add('disabled');
        btn.onclick = null;
    });
    
    answerButtons.forEach((btn, index) => {
        if (question.correct.includes(index)) {
            btn.classList.add('correct');
            if (btn.querySelector('.answer-checkmark')) {
                btn.querySelector('.answer-checkmark').textContent = '✓';
            }
        } else if (selectedAnswers.includes(index)) {
            btn.classList.add('incorrect');
            if (btn.querySelector('.answer-checkmark')) {
                btn.querySelector('.answer-checkmark').textContent = '✗';
            }
        }
    });
    
    if (isCorrect) {
        feedback.textContent = `✅ Правильно! +1 балл`;
        feedback.className = 'quiz-feedback correct';
        score += 1;
        playCorrectSound();
    } else {
        feedback.textContent = '❌ Неправильно!';
        feedback.className = 'quiz-feedback incorrect';
        playWrongSound();
        explanation.textContent = question.explanation;
        explanation.style.display = 'block';
    }
    
    document.getElementById('next-btn').style.display = 'block';
}

function checkSingleAnswer(selectedIndex) {
    const question = currentQuiz.questions[currentQuestion];
    const answerButtons = document.querySelectorAll('.answer-btn');
    const feedback = document.getElementById('quiz-feedback');
    const explanation = document.getElementById('answer-explanation');
    
    const selectionCounter = document.getElementById('selection-counter');
    if (selectionCounter) {
        selectionCounter.remove();
    }
    
    userAnswers.push({
        question: question.question,
        userAnswer: question.answers[selectedIndex],
        correctAnswer: question.answers[question.correct],
        isCorrect: selectedIndex === question.correct
    });
    
    answerButtons.forEach(btn => {
        btn.classList.add('disabled');
        btn.onclick = null;
    });
    
    if (selectedIndex === question.correct) {
        answerButtons[selectedIndex].classList.add('correct');
        feedback.textContent = '✅ Правильно! +1 балл';
        feedback.className = 'quiz-feedback correct';
        score += 1;
        playCorrectSound();
    } else {
        answerButtons[selectedIndex].classList.add('incorrect');
        answerButtons[question.correct].classList.add('correct');
        feedback.textContent = '❌ Неправильно!';
        feedback.className = 'quiz-feedback incorrect';
        playWrongSound();
        explanation.textContent = question.explanation;
        explanation.style.display = 'block';
    }
    
    document.getElementById('next-btn').style.display = 'block';
}

function nextQuestion() {
    currentQuestion++;
    
    if (currentQuestion < currentQuiz.questions.length) {
        showQuestion();
    } else {
        finishQuiz();
    }
}

function startTimer() {
    startTime = new Date();
    timer = setInterval(() => {
        const currentTime = new Date();
        totalTimeSpent = Math.floor((currentTime - startTime) / 1000);
        document.getElementById('timer').textContent = formatTime(totalTimeSpent);
    }, 1000);
}

function finishQuiz() {
    clearInterval(timer);
    
    if (isFullscreen) {
        exitFullscreen();
    }
    
    const endTime = new Date();
    totalTimeSpent = Math.floor((endTime - startTime) / 1000);
    
    document.getElementById('quiz-screen').classList.remove('active');
    document.getElementById('results-screen').classList.add('active');
    
    const finalScore = score;
    
    document.getElementById('correct-answers').textContent = `${finalScore}/${currentQuiz.questions.length}`;
    document.getElementById('time-spent').textContent = formatTime(totalTimeSpent);
    document.getElementById('total-score').textContent = finalScore;
    
    selectedNickname = null;
    document.getElementById('player-nickname').value = '';
}

function restartQuiz() {
    window.location.href = 'quiz.html';
}

async function saveResults() {
    const playerName = document.getElementById('player-nickname').value.trim();
    if (!playerName) {
        showNotification('Пожалуйста, введите ваш ник!', 'error');
        return;
    }
    
    if (isFullscreen) {
        exitFullscreen();
    }
    
    const finalScore = parseInt(document.getElementById('total-score').textContent);
    
    const resultData = {
        playerName: playerName,
        score: finalScore,
        time: totalTimeSpent,
        quizId: currentQuizId,
        quizTitle: currentQuiz.title
    };
    
    const saveBtn = document.querySelector('.luxury-btn.btn-primary');
    const originalText = saveBtn.innerHTML;
    saveBtn.innerHTML = '<span>⏳ Сохранение...</span>';
    saveBtn.disabled = true;
    
    try {
        const firebaseSuccess = await saveResultToFirebase(resultData);
        
        if (firebaseSuccess) {
            showNotification('Результат успешно сохранен в общую таблицу!', 'success');
            
            setTimeout(() => {
                window.location.href = `leaders.html?quiz=${currentQuizId}`;
            }, 2000);
        } else {
            showNotification('Результат сохранен локально. Общая таблица недоступна.', 'warning');
            saveBtn.innerHTML = originalText;
            saveBtn.disabled = false;
        }
        
    } catch (error) {
        console.error('Ошибка сохранения:', error);
        showNotification('Ошибка сохранения', 'error');
        saveBtn.innerHTML = originalText;
        saveBtn.disabled = false;
    }
}

function showNotification(message, type = 'info') {
    document.querySelectorAll('.notification').forEach(n => n.remove());
    
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.innerHTML = `
        <div class="notification-content">
            <span class="notification-icon">${type === 'success' ? '✅' : type === 'error' ? '❌' : type === 'warning' ? '⚠️' : 'ℹ️'}</span>
            <span>${message}</span>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => notification.classList.add('show'), 100);
    
    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 300);
    }, 4000);
}

function toggleFullscreen() {
    const quizScreen = document.querySelector('.quiz-screen');
    if (!isFullscreen) {
        enterFullscreen(quizScreen);
    } else {
        exitFullscreen();
    }
}

function enterFullscreen(element) {
    if (element.requestFullscreen) {
        element.requestFullscreen();
    } else if (element.mozRequestFullScreen) {
        element.mozRequestFullScreen();
    } else if (element.webkitRequestFullscreen) {
        element.webkitRequestfullscreen();
    } else if (element.msRequestFullscreen) {
        element.msRequestFullscreen();
    }
    isFullscreen = true;
    updateFullscreenButton();
    document.body.classList.add('fullscreen-mode');
}

function exitFullscreen() {
    if (document.exitFullscreen) {
        document.exitFullscreen();
    } else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
    } else if (document.webkitExitFullscreen) {
        document.webkitExitFullscreen();
    } else if (document.msExitFullscreen) {
        document.msExitFullscreen();
    }
    isFullscreen = false;
    updateFullscreenButton();
    document.body.classList.remove('fullscreen-mode');
}

function updateFullscreenButton() {
    const fullscreenToggle = document.getElementById('fullscreen-toggle');
    const fullscreenIcon = document.getElementById('fullscreen-icon');
    
    if (fullscreenToggle && fullscreenIcon) {
        if (isFullscreen) {
            fullscreenIcon.textContent = '⛶';
            fullscreenToggle.title = 'Выйти из полного экрана';
        } else {
            fullscreenIcon.textContent = '⛶';
            fullscreenToggle.title = 'Полный экран';
        }
    }
}

document.addEventListener('fullscreenchange', handleFullscreenChange);
document.addEventListener('mozfullscreenchange', handleFullscreenChange);
document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
document.addEventListener('msfullscreenchange', handleFullscreenChange);

function handleFullscreenChange() {
    isFullscreen = !!(document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement);
    updateFullscreenButton();
    if (isFullscreen) {
        document.body.classList.add('fullscreen-mode');
    } else {
        document.body.classList.remove('fullscreen-mode');
    }
}

document.addEventListener('DOMContentLoaded', function() {
    const testAudio = document.createElement('audio');
    if (!testAudio.canPlayType) {
        soundEnabled = false;
        const soundToggle = document.getElementById('sound-toggle');
        if (soundToggle) {
            soundToggle.style.display = 'none';
        }
    }
    
    const savedSound = localStorage.getItem('quizSoundEnabled');
    if (savedSound !== null) {
        soundEnabled = JSON.parse(savedSound);
    }
    updateSoundButton();
    
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.querySelectorAll('audio').forEach(audio => {
                audio.pause();
            });
        }
    });
});